(function(o,a,l,m,d,v,n){"use strict";function c(e,t=a.storage.selected){switch(t){case"calendar":return e.calendar();case"relative":return e.fromNow();case"iso":return e.toISOString();case"custom":return e.format(a.storage.customFormat)}}var i=l.findByName("RowManager"),h=()=>d.before("generate",i.prototype,([e])=>{e.rowType===1?(a.storage.separateMessages&&(e.isFirst=!0),e.message.__customTimestamp=c(e.message.timestamp)):e.rowType==="day"&&(e.text=c(m.moment(e.text,"LL")))}),y=()=>d.after("generate",i.prototype,([e],{message:t})=>{e.rowType===1&&e.message.__customTimestamp&&t.state==="SENT"&&t.timestamp&&(t.timestamp=e.message.__customTimestamp)});function f(){var e=new Array;return e.push(h()),e.push(y()),()=>e.forEach(t=>t())}var{ClearButtonVisibility:R,default:w}=l.findByProps("ClearButtonVisibility");function p({value:e,onChangeText:t,placeholder:r,disabled:s}){return React.createElement(w,{value:e,onChangeText:t,placeholder:r,clearButtonVisibility:R.WITH_CONTENT,showBorder:!1,showTopContainer:!1,disabled:s,style:{paddingHorizontal:15,paddingVertical:13}})}var{FormRow:E}=n.Forms,T=l.findByName("RowCheckmark");function M({label:e,subLabel:t,selected:r,onPress:s}){return React.createElement(E,{label:e,subLabel:t,trailing:React.createElement(T,{selected:r}),onPress:s})}var{ScrollView:C}=n.General,{FormSection:u,FormDivider:F,FormSwitchRow:S}=n.Forms,g=[{label:"Calendar",key:"calendar"},{label:"Relative",key:"relative"},{label:"ISO 8601",key:"iso"},{label:"Custom",key:"custom",renderExtra:e=>React.createElement(p,{value:a.storage.customFormat,onChangeText:t=>a.storage.customFormat=t,placeholder:"dddd, MMMM Do YYYY, h:mm:ss a",disabled:!e})}];function _(){return v.useProxy(a.storage),React.createElement(C,null,React.createElement(u,{title:"Mode"},g.map(({label:e,key:t,renderExtra:r},s)=>React.createElement(React.Fragment,null,React.createElement(M,{label:e,subLabel:c(m.moment(),t),selected:a.storage.selected===t,onPress:()=>a.storage.selected=t}),r&&r(a.storage.selected===t),s!==g.length-1&&React.createElement(F,null)))),React.createElement(u,null,React.createElement(S,{label:"Separate messages",subLabel:"Always shows username, avatar and timestamp for each message",value:a.storage.separateMessages,onValueChange:e=>{a.storage.separateMessages=e}})))}var b=[],Y={onLoad:()=>{a.storage.selected??="calendar",a.storage.customFormat??="dddd, MMMM Do YYYY, h:mm:ss a",b.push(f())},onUnload:()=>{b.forEach(e=>e())},settings:_};return o.default=Y,Object.defineProperty(o,"__esModule",{value:!0}),o})({},vendetta.plugin,vendetta.metro,vendetta.metro.common,vendetta.patcher,vendetta.storage,vendetta.ui.components);

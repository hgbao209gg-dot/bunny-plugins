(function(g,o,p,h){"use strict";function f(e,t,r,n,a,s,d){try{var u=e[s](d),i=u.value}catch(N){r(N);return}u.done?t(i):Promise.resolve(i).then(n,a)}function y(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var s=e.apply(t,r);function d(i){f(s,n,a,d,u,"next",i)}function u(i){f(s,n,a,d,u,"throw",i)}d(void 0)})}}var{Pressable:v}=o.findByProps("Button","Text","View"),m=o.findByName("ProfileBanner",!1),S=o.findByName("HeaderAvatar",!1),{openMediaModal:b}=o.findByProps("openMediaModal"),{hideActionSheet:w}=o.findByProps("hideActionSheet"),{getChannelId:P}=o.findByStoreName("SelectedChannelStore"),{getGuildId:B}=o.findByStoreName("SelectedGuildStore");function M(e){return new Promise((t,r)=>{h.ReactNative.Image.getSize(e,(n,a)=>t({width:n,height:a}),n=>r(n))})}function l(e,t){return c.apply(this,arguments)}function c(){return c=y(function*(e,t){var{width:r,height:n}=yield M(e);w(),b({initialSources:[{uri:e,sourceURI:e,width:r,height:n,guildId:B(),channelId:P()}],initialIndex:0,originLayout:{width:0,height:0,x:t.pageX,y:t.pageY,resizeMode:"fill"}})}),c.apply(this,arguments)}var A=p.after("default",S,([{user:e,style:t,guildId:r}],n)=>{var a="png";typeof e.guildMemberAvatars?.[r]=="string"&&e.guildMemberAvatars?.[r].includes("a_")&&(a="gif");var s=e.guildMemberAvatars?.[r]&&`https://cdn.discordapp.com/guilds/${r}/users/${e.id}/avatars/${e.guildMemberAvatars[r]}.${a}?size=4096`,d=e?.getAvatarURL?.(!1,4096,!0);if(!d)return n;var u=typeof d=="number"?`https://cdn.discordapp.com/embed/avatars/${Number(BigInt(e.id)>>22n)%6}.png`:d?.replace(".webp",".png");return delete n.props.style,React.createElement(v,{onPress:({nativeEvent:i})=>l(u,i),onLongPress:({nativeEvent:i})=>s&&l(s,i),style:t},n)}),I=p.after("default",m,([{bannerSource:e}],t)=>{if(typeof e?.uri!="string"||!t)return t;var r=e.uri.replace(/(?:\?size=\d{3,4})?$/,"?size=4096").replace(".webp",".png");return React.createElement(v,{onPress:({nativeEvent:n})=>l(r,n)},t)});function z(){A(),I()}return g.onUnload=z,g})({},vendetta.metro,vendetta.patcher,vendetta.metro.common);
